# 一、文件说明

## 1. C语言源文件 *.c

- 文件统一采用小写命名。
- 我们所要实现的所有功能的源代码均在这个文件里。编译器以此文件来进行编译并生成相应的目标文件。
- 在大规模程序开发中，一个程序由很多个模块组成，很可能这些模块的编写任务被分配到不同的人。
- 该文件追求接口的单一性，把不需要的细节尽可能对外部屏蔽起来，这是需要注意的地方。

## 2. C语言头文件 *.h

- 工程编译必然涉及到多文件编译，所以把功能区分为不同模块，即模块化编程。在这样的系统中，往往会有多个C文件，而且每个C文件的作用不尽相同。C文件对外提供接口，因此必须有一些函数或者变量提供给外部其它文件进行调用。
- 头文件的作用就在于此。头文件可以理解为说明，其内容就是我们的模块对外提供的接口函数或者接口变量。其文件内部不应该包含任何实质性的函数代码。
- 一般来说，头文件的名字应该与源文件的名字保持一致，这样我们便可以清晰地知道对应关系。- - 同时我们自身模块也需要包含这份模块头文件，因为其包含了模块源文件中所需要的宏定义或者结构体。
```c
#ifndef _FILE__H_ 
#define _FILE__H_ 
#endif 
```
- 这个几句条件编译和宏定义是为了防止重复包含。否则会引起重复包含的错误。


# 二、文件排版

## 2.1 文件非代码内容

### 2.1.1 文件介绍

- 在文件开始的地方应该对本文件做一个总体的、概括性的注释，比如：版权声明、版本号、作者、文件简介、修改日志等。
```c
/*************************************************
File name: // 文件名
Author： //作者
Version: //版本号
Description: // 用于详细说明此程序文件完成的主要功能，与其他模块
// 或函数的接口，输出值、取值范围、含义及参数间的控制、顺序、独立或依赖等关系
Others: // 其它内容的说明
Log: // 修改日志，包括修改内容，日期，修改人等
*************************************************/
```

### 2.1.2 注释

- 单行注释

```c
// 单行注释
```

- 多行注释

```c
/*
 This is the preferred style for multi-line
 comments in the Linux kernel source code.
 Please use it consistently.
*/
```

### 2.1.3 函数介绍

- 函数需要注释其作用，参数、以及返回值，注释放在函数开头。
```c
/*
* @Description: 函数描述，描述本函数的基本功能
* @param 1 – 参数 1.
* @param 2 – 参数 2
* @return – 返回值
*/
```
## 2.2 文件代码内容

### 2.2.1 代码缩进

- 代码缩进要使用制表符，也就是TAB键，不要使用空格键缩进。一般情况一个TAB为4个字符。
- 可参考Python语法。

### 2.2.2 代码行字数

- 以具体建议为准。

### 2.2.3 代码分行标准

- 每一次功能实现都要分行，具体包括但不限于：定义赋值变量，功能语句等。

### 2.2.4 示范

```c
/*************************************************
File name: // 文件名
Author： //作者
Version: //版本号
Description: // 详细说明
Others: // 其它内容
Log: // 修改日志
*************************************************/

#include “head_file.h”

#define True Ture

int variable_1 = 1;
int variable_2 = 1;
int variable_3 = 1;

int main()
{
  int state = 1;

	if(state == 1)
  {
	  while(state == 1)
	  {
		  // function();
    }
  }
  else if(state == 2)
  {
    // function();
  }
  else
  {
    // function();
  }

  do
  { 
    do-loop(); 
  } 
  while(condition);

  switch (action) 
  { 
    case situation_1: 
      function_1();
      break;
    case situation_2: 
      function_2();
      break;
    default: 
      function_3();
      break;
  }	

	return 0;
}
```

## 2.3 声明定义

### 2.3.1 命名

- unix 命名风格是单词用小写，然后每个单词用下划线“_”连接在一起。
- 函数和变量的命名上都一致，这也是 Linux 内核里面所使用的命名方法。
- 具有互斥意义的变量或者动作相反的函数应该是用互斥词组命名。
- 不要使用单字节命名变量，但是允许使用 i，j，k 这样的作为局部循环变量。
- 移植代码，命名风格可以和原风格一致。
- 不要采用匈牙利命名法，尽量避免使用全局变量。

### 2.3.2 宏命名

- 常量宏定义的命名，建议使用大写，单词之间使用下划线“_”连接在一起。
```c
#define PI_ROUNDED 3.14
```

## 2.4 函数

- 一个函数只能完成一个功能。
- 重复代码提炼成函数。
- 不同函数用空行隔开。
- 函数嵌套不能过深。
- 如果一个函数只在同一个文件使用，那么就用 static，确保这个函数只在声明它的文件可见。

## 2.5 变量

- 一个变量只能完成一个功能。
- 不用或者少用全局变量。
- 防止局部变量和全局变量重名。
- 严禁使用未经初始化的变量作为右值。
```c
/* 不可取的初始化：初始化和声明分离 */
int num;
'''
num = 2;

/* 可取的初始化：初始化和声明合并 */
int num = 2;

/* 较好的初始化：?:减少数据流和控制流的混合 */
int num = a ? 4 : 3;
```
- 减少不必要的数据类型转换。

